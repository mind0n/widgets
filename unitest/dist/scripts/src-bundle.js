var AjaxUtil = (function () {
    function AjaxUtil(success, error) {
        this.xhr = new XMLHttpRequest();
        this.onsuccess = success;
        this.onerror = error;
        this.xhr.onreadystatechange = function () {
            if (this.xhr.readyState == 4 && this.xhr.status == 200) {
                this.onsuccess(this.xhr.responseText);
            }
            else if (this.xhr.readState == 4) {
                this.onerror(this.xhr.responseText);
            }
        };
    }
    AjaxUtil.prototype.send = function (type, url, data, header, isSync) {
        this.xhr.open(type, url, !isSync);
        if (header) {
            for (var i in header) {
                this.xhr.setRequestHeader(i, header[i]);
            }
        }
        var args = null;
        if (data) {
            args = '';
            for (var i in data) {
                args += i + '=' + encodeURIComponent(data[i]) + '&';
            }
        }
        this.xhr.send(args);
    };
    AjaxUtil.prototype.get = function (url, isSync) {
        return this.send("GET", url, isSync);
    };
    AjaxUtil.prototype.post = function (url, isSync) {
        return this.send("POST", url, isSync);
    };
    return AjaxUtil;
}());
export default function ajax(success, error) {
    var rlt = new AjaxUtil(success, error);
    return rlt;
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtJQUtJLGtCQUFZLE9BQWdCLEVBQUUsS0FBYztRQUpsQyxRQUFHLEdBQUcsSUFBSSxjQUFjLEVBQUUsQ0FBQztRQUtqQyxJQUFJLENBQUMsU0FBUyxHQUFHLE9BQU8sQ0FBQztRQUN6QixJQUFJLENBQUMsT0FBTyxHQUFHLEtBQUssQ0FBQztRQUNyQixJQUFJLENBQUMsR0FBRyxDQUFDLGtCQUFrQixHQUFHO1lBQzFCLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsVUFBVSxJQUFJLENBQUMsSUFBSSxJQUFJLENBQUMsR0FBRyxDQUFDLE1BQU0sSUFBSSxHQUFHLENBQUMsQ0FBQSxDQUFDO2dCQUNwRCxJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsWUFBWSxDQUFDLENBQUM7WUFDMUMsQ0FBQztZQUFBLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLFNBQVMsSUFBSSxDQUFDLENBQUMsQ0FBQSxDQUFDO2dCQUMvQixJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsWUFBWSxDQUFDLENBQUM7WUFDeEMsQ0FBQztRQUNMLENBQUMsQ0FBQTtJQUNMLENBQUM7SUFFUyx1QkFBSSxHQUFkLFVBQWUsSUFBVyxFQUFFLEdBQVUsRUFBRSxJQUFTLEVBQUUsTUFBVyxFQUFFLE1BQWU7UUFDM0UsSUFBSSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLEdBQUcsRUFBRSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQ2xDLEVBQUUsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFBLENBQUM7WUFDUixHQUFHLENBQUEsQ0FBQyxJQUFJLENBQUMsSUFBSSxNQUFNLENBQUMsQ0FBQSxDQUFDO2dCQUNqQixJQUFJLENBQUMsR0FBRyxDQUFDLGdCQUFnQixDQUFDLENBQUMsRUFBRSxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUM1QyxDQUFDO1FBQ0wsQ0FBQztRQUNELElBQUksSUFBSSxHQUFPLElBQUksQ0FBQztRQUNwQixFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQSxDQUFDO1lBQ04sSUFBSSxHQUFHLEVBQUUsQ0FBQztZQUNWLEdBQUcsQ0FBQSxDQUFDLElBQUksQ0FBQyxJQUFJLElBQUksQ0FBQyxDQUFBLENBQUM7Z0JBQ2YsSUFBSSxJQUFJLENBQUMsR0FBRyxHQUFHLEdBQUcsa0JBQWtCLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDO1lBQ3hELENBQUM7UUFDTCxDQUFDO1FBQ0QsSUFBSSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDeEIsQ0FBQztJQUVELHNCQUFHLEdBQUgsVUFBSSxHQUFVLEVBQUUsTUFBZTtRQUMzQixNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLEVBQUUsR0FBRyxFQUFFLE1BQU0sQ0FBQyxDQUFDO0lBQ3pDLENBQUM7SUFFRCx1QkFBSSxHQUFKLFVBQUssR0FBVSxFQUFFLE1BQWU7UUFDNUIsTUFBTSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLEdBQUcsRUFBRSxNQUFNLENBQUMsQ0FBQztJQUMxQyxDQUFDO0lBQ0wsZUFBQztBQUFELENBekNBLEFBeUNDLElBQUE7QUFFRCw2QkFBNkIsT0FBZ0IsRUFBRSxLQUFjO0lBQ3pELElBQUksR0FBRyxHQUFHLElBQUksUUFBUSxDQUFDLE9BQU8sRUFBRSxLQUFLLENBQUMsQ0FBQztJQUN2QyxNQUFNLENBQUMsR0FBRyxDQUFDO0FBQ2YsQ0FBQyIsImZpbGUiOiJzcmMtYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiY2xhc3MgQWpheFV0aWx7XHJcbiAgICBwcm90ZWN0ZWQgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XHJcbiAgICBwcm90ZWN0ZWQgb25zdWNjZXNzOkZ1bmN0aW9uO1xyXG4gICAgcHJvdGVjdGVkIG9uZXJyb3I6RnVuY3Rpb247XHJcbiAgICBcclxuICAgIGNvbnN0cnVjdG9yKHN1Y2Nlc3M6RnVuY3Rpb24sIGVycm9yOkZ1bmN0aW9uKXtcclxuICAgICAgICB0aGlzLm9uc3VjY2VzcyA9IHN1Y2Nlc3M7XHJcbiAgICAgICAgdGhpcy5vbmVycm9yID0gZXJyb3I7XHJcbiAgICAgICAgdGhpcy54aHIub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgaWYgKHRoaXMueGhyLnJlYWR5U3RhdGUgPT0gNCAmJiB0aGlzLnhoci5zdGF0dXMgPT0gMjAwKXtcclxuICAgICAgICAgICAgICAgIHRoaXMub25zdWNjZXNzKHRoaXMueGhyLnJlc3BvbnNlVGV4dCk7XHJcbiAgICAgICAgICAgIH1lbHNlIGlmICh0aGlzLnhoci5yZWFkU3RhdGUgPT0gNCl7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uZXJyb3IodGhpcy54aHIucmVzcG9uc2VUZXh0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgcHJvdGVjdGVkIHNlbmQodHlwZTpzdHJpbmcsIHVybDpzdHJpbmcsIGRhdGE/OmFueSwgaGVhZGVyPzphbnksIGlzU3luYz86Ym9vbGVhbil7XHJcbiAgICAgICAgdGhpcy54aHIub3Blbih0eXBlLCB1cmwsICFpc1N5bmMpO1xyXG4gICAgICAgIGlmIChoZWFkZXIpe1xyXG4gICAgICAgICAgICBmb3IobGV0IGkgaW4gaGVhZGVyKXtcclxuICAgICAgICAgICAgICAgIHRoaXMueGhyLnNldFJlcXVlc3RIZWFkZXIoaSwgaGVhZGVyW2ldKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgYXJnczphbnkgPSBudWxsO1xyXG4gICAgICAgIGlmIChkYXRhKXtcclxuICAgICAgICAgICAgYXJncyA9ICcnO1xyXG4gICAgICAgICAgICBmb3IobGV0IGkgaW4gZGF0YSl7XHJcbiAgICAgICAgICAgICAgICBhcmdzICs9IGkgKyAnPScgKyBlbmNvZGVVUklDb21wb25lbnQoZGF0YVtpXSkgKyAnJic7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy54aHIuc2VuZChhcmdzKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgZ2V0KHVybDpzdHJpbmcsIGlzU3luYz86Ym9vbGVhbil7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc2VuZChcIkdFVFwiLCB1cmwsIGlzU3luYyk7XHJcbiAgICB9XHJcblxyXG4gICAgcG9zdCh1cmw6c3RyaW5nLCBpc1N5bmM/OmJvb2xlYW4pe1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNlbmQoXCJQT1NUXCIsIHVybCwgaXNTeW5jKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gYWpheChzdWNjZXNzOkZ1bmN0aW9uLCBlcnJvcjpGdW5jdGlvbik6QWpheFV0aWx7XHJcbiAgICBsZXQgcmx0ID0gbmV3IEFqYXhVdGlsKHN1Y2Nlc3MsIGVycm9yKTtcclxuICAgIHJldHVybiBybHQ7XHJcbn0iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
